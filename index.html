<!DOCTYPE html>
<html>
<meta charset="utf-8">
<title>DataViz Midterm ScatterPlot</title>

<style>

  p {
    font-family: 'Roboto', sans-serif;
    font-weight: 100 ;
    font-size: 17px;
    line-height: 23px;
  }


  body {
    font-family: 'Roboto', sans-serif;
    font-weight: 100 ;
    font-size: 14px;
    line-height: 8px;
  }

.axis path,
.axis line {
  fill: none;
  stroke: #404040;
  shape-rendering: crispEdges;
}

.dot {
  opacity: 0.7;
}

.first-graph {
  height: 200vh;
  display: flex;
}

.econ-personal {
  width: 50%;
  height: 100vh;
  display:flex;
  justify-content: center;
  align-items: center;
  margin: 0!important;
}


.econ-personal-desc {
  width: 50%;
}


.econ-personal-desc div{
  height:100vh;
  display: flex;
  flex-direction: column;
  justify-content: space-around;
  align-items: center;
}


.econ-personal-desc div > p{
  width: 65%;
}

.figure1 {
  font-family: "Roboto", sans-serif;
  font-weight: bold;
  font-size: 20px;
}


header {
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: "Roboto", sans-serif;
  font-weight: bold;
  font-size: 25px;
  line-height: 25px;
  background: linear-gradient(to bottom, rgb(255,140,0), rgba(255,255,255, 0.8));
  background-size: cover;

}

</style>


<body>
  <header>
      <h1>THE HUMAN FREEDOM INDEX</h1>
  </header>

  <section class = "first-graph">
      <div class = "econ-personal">
          <script src="http://d3js.org/d3.v3.min.js"></script>
     </div>
     <div class = "econ-personal-desc">
          <div>
             <p>Horsepower and miles per galon are negatively correlated. Cars with 8 cylinders
             that perform better in terms of fuel consumed per mile, whereas those with 4 cylinders
             are usually the ones that consume more fuel per mile show a decrease in their horsepower.</p>
          </div>

          <div>
             <p>Horsepower and miles per galon are negatively correlated. Cars with 8 cylinders
             that perform better in terms of fuel consumed per mile, whereas those with 4 cylinders
             are usually the ones that consume more fuel per mile show a decrease in their horsepower.</p>
          </div>

          <div>
             <p>Horsepower and miles per galon are negatively correlated. Cars with 8 cylinders
             that perform better in terms of fuel consumed per mile, whereas those with 4 cylinders
             are usually the ones that consume more fuel per mile show a decrease in their horsepower.</p>
          </div>

     </div>

   </section>
   <script src = "https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.6/ScrollMagic.min.js"></script>
   <script src = "https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.6/plugins/debug.addIndicators.min.js"></script>
   <script>
  
     function splitScroll() {
    const controller = new ScrollMagic.Controller();

    new ScrollMagic.Scene({
        duration: '200%',
        triggerElement: '.econ-personal',
        triggerHook: 0,
        })
        .setPin('.econ-personal')
        .addIndicators()
        .addTo(controller);
    }

    splitScroll();

     
    </script>
  
  <script> // Set up margin, width, and height
   var margin = {top: 50, right: 340, bottom: 50, left: 100},
       width = 960 - margin.left - margin.right,
       height = 500 - margin.top - margin.bottom;


   // Add canvas to body
   var svg = d3.select("div").append("svg")
       .attr("width", width + margin.left + margin.right)
       .attr("height", height + margin.top + margin.bottom)
       .append("g")
       .attr("transform", "translate(" + margin.left + "," + margin.top + ")");


   // Set up x values for EconomicFreedomScore
   var xValue = function(d) { return d.PersonalFreedomScore;},
       xScale = d3.scale.linear().range([0, width]),
       xMap = function(d) { return xScale(xValue(d));}, // Position on x axis of each element in data
       xAxis = d3.svg.axis().scale(xScale).orient("bottom");


   // Set up y values for PersonalFreedomScore
   var yValue = function(d) { return d.EconomicFreedomScore;},
       yScale = d3.scale.linear().range([height, 0]),
       yMap = function(d) { return yScale(yValue(d));}, // Position on y axis of each element in data
       yAxis = d3.svg.axis().scale(yScale).orient("left");


   // Set fill color to be HumanQuartile and make colors customizable
   var cValue = function(d) { return d.HumanQuartile;},
       colors = ['#8D452A', '#E4783C', '#F1BC98', '#FAE4D6'];
       color = d3.scale.ordinal().range(colors);


   // Load the car data
   d3.csv("https://gist.githubusercontent.com/glosophy/f5ca9da48ea49b22155b9502313b6746/raw/73ad1159d850046212cc04a16309a0a81d5837cb/hfi2016.csv", function(error, data) {
     data.forEach(function(d) {
       d.HumanQuartile = +d.HumanQuartile;
       d.PersonalFreedomScore = +d.PersonalFreedomScore;
       d.EconomicFreedomScore = +d.EconomicFreedomScore
     });


     // The domain of x and y
     xScale.domain([0, 10]);
     yScale.domain([0, 10]);


     // x-axis
     svg.append("g")
         .attr("class", "x axis")
         .attr("transform", "translate(0," + height + ")")
         .call(xAxis)
         .append("text")
             .attr("class", "x-label")
             .attr("x", width)
             .attr("y", -6)
             .style("text-anchor", "end")
             .text("Personal Freedom");


     // y-axis
     svg.append("g")
         .attr("class", "y axis")
         .call(yAxis)
         .append("text")
             .attr("class", "y-label")
             .attr("transform", "rotate(-90)")
             .attr("y", 6)
             .attr("dy", ".71em")
             .style("text-anchor", "end")
             .text("Economic Freedom");


     // Draw the scatterplot
     svg.selectAll(".dot") // Selects the svg element (dot)
         .data(data) // If it finds any rects, it returns them as a selection (an array of elements)
         .enter().append("circle") // Adds a circle for each item in our selection
         .attr("class", "dot")
         .attr("r", 7)
         .attr("cx", xMap)
         .attr("cy", yMap)
         .style("fill", function(d) { return color(cValue(d));})


     // Legend for origin
     var legend = svg.selectAll(".legend")
         .data(color.domain()).enter().append("g")
             .attr("class", "legend")
             .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });


     // Draw colored squares for the legend
     legend.append("rect")
         .attr("x", width - 390)
         .attr("y", 300)
         .attr("width", 18)
         .attr("height", 18)
         .style("fill", color);


     // Insert text for the legend
     legend.append("text")
         .attr("x", width - 400)
         .attr("y", 308)
         .attr("dy", ".35em")
         .style("text-anchor", "end")
         .text(function(d) { return d + "ยบ Quartile" ;})


       svg.append("text")
           .attr("class", "figure1")
           .attr("x", 0)
           .attr("y", -30)
           .attr("dy", ".35em")
           .text("FIGURE 1: Economic Freedom and Personal Freedom");

   });
</script>

</body>
</html>
